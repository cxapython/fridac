---
description: fridacliä¸­çš„å¸¸è§ä»£ç æ¨¡å¼å’Œæ¨¡æ¿
---

# å¸¸è§ä»£ç æ¨¡å¼

## JavaScript Hookå‡½æ•°æ¨¡æ¿

### Java Hookå‡½æ•°æ¨¡æ¿
```javascript
function hookComponentName(showStack) {
    showStack = showStack || 0;
    var needStack = showStack === 1;
    
    Java.perform(function() {
        try {
            var targetClass = Java.use("android.component.ClassName");
            LOG("å¼€å§‹Hook " + "ClassName", { c: Color.Blue });
            
            targetClass.methodName.implementation = function(arg1, arg2) {
                LOG("æ–¹æ³•è¢«è°ƒç”¨: " + arg1, { c: Color.Green });
                
                var result = this.methodName(arg1, arg2);
                
                if (needStack) {
                    printStack();
                }
                
                return result;
            };
            
            LOG("ComponentName Hookå·²å¯ç”¨!", { c: Color.Green });
        } catch (e) {
            LOG("Hookå¤±è´¥: " + e.message, { c: Color.Red });
        }
    });
}
```

### Native Hookå‡½æ•°æ¨¡æ¿
```javascript
function nativeHookFunctionName(showStack) {
    showStack = showStack || 0;
    var needStack = showStack === 1;
    
    try {
        var targetModule = Process.findModuleByName("target.so");
        if (!targetModule) {
            LOG("æ¨¡å—æœªæ‰¾åˆ°: target.so", { c: Color.Red });
            return;
        }
        
        var targetFunction = Module.findExportByName("target.so", "function_name");
        if (!targetFunction) {
            LOG("å‡½æ•°æœªæ‰¾åˆ°: function_name", { c: Color.Red });
            return;
        }
        
        Interceptor.attach(targetFunction, {
            onEnter: function(args) {
                LOG("å‡½æ•°è°ƒç”¨: function_name", { c: Color.Blue });
                LOG("å‚æ•°: " + args[0], { c: Color.Yellow });
                
                if (needStack) {
                    printNativeStack();
                }
            },
            onLeave: function(retval) {
                LOG("è¿”å›å€¼: " + retval, { c: Color.Green });
            }
        });
        
        LOG("Nativeå‡½æ•°Hookå·²å¯ç”¨: function_name", { c: Color.Green });
    } catch (e) {
        LOG("Hookå¤±è´¥: " + e.message, { c: Color.Red });
    }
}
```

## Pythonè¡¥å…¨å‡½æ•°æ¨¡æ¿

### æ·»åŠ æ–°å‡½æ•°åˆ°FridacCompleter
```python
# åœ¨FridacCompleter.__init__ä¸­çš„self.functionså­—å…¸æ·»åŠ :
'functionName': ('ğŸ”§ å‡½æ•°æè¿°', "functionName('å‚æ•°ç¤ºä¾‹')"),
```

### RPCå¯¼å‡ºæ¨¡æ¿
```python
# åœ¨create_frida_script()çš„rpc.exportsä¸­æ·»åŠ :
functionName: typeof functionName !== 'undefined' ? functionName : function() { 
    console.log("functionName éœ€è¦ç›¸åº”å·¥å…·æ¨¡å—"); 
},
```

## é”™è¯¯å¤„ç†æ¨¡å¼

### JavaScripté”™è¯¯å¤„ç†
```javascript
try {
    // Hookæ“ä½œ
    LOG("æ“ä½œæˆåŠŸ", { c: Color.Green });
} catch (e) {
    LOG("æ“ä½œå¤±è´¥: " + e.message, { c: Color.Red });
    return;
}
```

### Pythoné”™è¯¯å¤„ç†
```python
try:
    # æ–‡ä»¶æ“ä½œæˆ–Fridaæ“ä½œ
    log_success("æ“ä½œæˆåŠŸ")
except FileNotFoundError:
    log_error("æ–‡ä»¶æœªæ‰¾åˆ°")
except Exception as e:
    log_error(f"æ“ä½œå¤±è´¥: {e}")
```

## æ—¥å¿—è¾“å‡ºæ¨¡å¼

### JavaScriptæ—¥å¿—
```javascript
LOG("ä¿¡æ¯", { c: Color.Blue });      // ä¸€èˆ¬ä¿¡æ¯
LOG("æˆåŠŸ", { c: Color.Green });     // æˆåŠŸæ“ä½œ
LOG("è­¦å‘Š", { c: Color.Yellow });    // è­¦å‘Šä¿¡æ¯  
LOG("é”™è¯¯", { c: Color.Red });       // é”™è¯¯ä¿¡æ¯
LOG("è°ƒè¯•", { c: Color.Cyan });      // è°ƒè¯•ä¿¡æ¯
```

### Pythonæ—¥å¿—
```python
log_info("ä¿¡æ¯")       # ä¸€èˆ¬ä¿¡æ¯
log_success("æˆåŠŸ")    # æˆåŠŸæ“ä½œ
log_warning("è­¦å‘Š")    # è­¦å‘Šä¿¡æ¯
log_error("é”™è¯¯")      # é”™è¯¯ä¿¡æ¯
log_debug("è°ƒè¯•")      # è°ƒè¯•ä¿¡æ¯
```

## æ¨¡å—æŸ¥æ‰¾æ¨¡å¼

### JavaScriptæ¨¡å—æ“ä½œ
```javascript
// æŸ¥æ‰¾æ¨¡å—
var modules = Process.enumerateModules();
var targetModule = Process.findModuleByName("libname.so");

// æŸ¥æ‰¾å‡½æ•°
var exports = Module.enumerateExports("libname.so");
var targetFunction = Module.findExportByName("libname.so", "function_name");

// å†…å­˜æœç´¢
var pattern = "48 89 e5";
var results = Memory.scan(targetModule.base, targetModule.size, pattern, {
    onMatch: function(address, size) {
        LOG("æ‰¾åˆ°æ¨¡å¼: " + address, { c: Color.Green });
    }
});
```

## æ™ºèƒ½åˆ¤æ–­æ¨¡å¼

### ç›®æ ‡ç±»å‹è¯†åˆ«
```javascript
function smartTrace(target, options) {
    options = options || {};
    
    // åˆ¤æ–­æ˜¯å¦ä¸ºJavaç±»å
    if (target.includes('.') && target.match(/^[a-zA-Z][a-zA-Z0-9._]*$/)) {
        LOG("è¯†åˆ«ä¸ºJavaç›®æ ‡: " + target, { c: Color.Blue });
        return traceClass(target, options.showStack);
    }
    
    // åˆ¤æ–­æ˜¯å¦ä¸ºNativeå‡½æ•°
    if (typeof nativeHookNativeFunction !== 'undefined') {
        LOG("è¯†åˆ«ä¸ºNativeç›®æ ‡: " + target, { c: Color.Blue });
        return nativeHookNativeFunction(target, options);
    }
    
    LOG("æ— æ³•è¯†åˆ«ç›®æ ‡ç±»å‹: " + target, { c: Color.Yellow });
}
```

## æ‰¹é‡æ“ä½œæ¨¡å¼

### å¯ç”¨å¤šä¸ªHook
```javascript
function enableAllHooks(showStack) {
    var hooks = [
        hookBase64,
        hookToast, 
        hookJSONObject,
        hookHashMap,
        hookEditText
    ];
    
    hooks.forEach(function(hookFunc) {
        try {
            hookFunc(showStack);
        } catch (e) {
            LOG("Hookå¤±è´¥: " + hookFunc.name, { c: Color.Red });
        }
    });
}
```