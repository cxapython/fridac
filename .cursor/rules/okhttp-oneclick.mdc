---
alwaysApply: false
description: OkHttp Logger 一键抓包与重放快速指引（okhttpStart）
---
# OkHttp Logger 一键抓包与重放

本规则提供使用 OkHttp 插件的一键化说明，适用于快速集成与调试。

## 快速开始
- 一键启动（无需 dex、无需分步 find/hold）
```javascript
okhttpStart()
okhttpStart('api/')
okhttpStart({ filter: 'api/', loaderSample: 'okhttp3.OkHttpClient' })
```

## 查看与重放
```javascript
okhttpHistory()
okhttpResend(1)
okhttpClear()
```

## attach 模式
- 可直接在 attach 模式使用（无需 spawn）
- 可能错过进程早期请求；如需最早期流量，建议 spawn
- 推荐流程：
  1) `fridac -p <pkg>` 进入交互
  2) 进入首页或可产生网络的页面
  3) 执行 `okhttpStart([filter|options])`

## 故障排查
- 未检测到 RealCall：等待/手动触发网络，或 `okhttpStart({ loaderSample: 'okhttp3.OkHttpClient' })`
- 没有输出：确认过滤关键字是否匹配 URL/Headers
- 无法重放：仅对可同步重放的请求生效（已内置 clone/newCall 回退）

## 相关文件
- 插件: [frida_okhttp_logger.js](mdc:frida_okhttp_logger.js)
- 主工具: [frida_common_new.js](mdc:frida_common_new.js)
- 加载: [fridac_core/script_manager.py](mdc:fridac_core/script_manager.py)
- 文档: [README.md](mdc:README.md)

