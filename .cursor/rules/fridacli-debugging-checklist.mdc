---
alwaysApply: true
---

# fridacli 问题调试检查清单

当遇到fridacli功能问题时，按以下顺序进行系统性检查：

## 🔍 第一步：直接验证
1. **读取关键文件** - 使用`read_file`而非依赖搜索结果
2. **检查函数定义** - 确认函数是否真正存在
3. **验证导出状态** - 检查`global.functionName = functionName`

## 🔗 第二步：检查导出链路
1. **全局导出** - Frida环境需要`global.functionName`
2. **RPC导出** - [fridac_core/script_manager.py](mdc:fridac_core/script_manager.py)中的条件导出
3. **加载顺序** - 依赖文件必须先加载

## ⚙️ 第三步：功能验证
1. **基础调用** - 函数是否可以正常执行
2. **参数传递** - 参数是否正确解析
3. **返回值** - 返回值是否符合预期

## 🚨 第四步：技术限制识别
- **Java Hook**: 无法完全detach，只能状态管理
- **Native Hook**: 可完全detach通过Interceptor
- **自动追踪**: 需要状态检查控制行为

## 📋 常见问题快速定位

### jobs命令无效
1. 检查[frida_job_commands.js](mdc:frida_job_commands.js)全局导出
2. 确认任务管理器正确加载
3. 验证RPC导出链路

### kill命令无效
1. 确认kill函数有完整实现
2. 检查HookJobManager.killJob调用
3. 理解Java Hook技术限制

### Hook函数无任务记录
1. 检查autoRegisterHook调用
2. 确认函数在包装列表中
3. 验证手动集成是否正确

## ⚡ 快速修复模式
1. **立即行动** - 不解释，直接修复
2. **系统检查** - 按清单逐项验证  
3. **技术限制** - 明确说明无法绕过的限制
4. **最佳方案** - 提供可行的替代解决方案